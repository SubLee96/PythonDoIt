Python

Chapter07. 정규 표현식
: 꽤 오랜 기간 파이썬 프로그래밍을 해온 사람도 모르는 부분들이 있다.
> "파이썬 하우투"에서 참고하여 그곳에서 소개하는 수준의 내용만이라도 확인!

07-1 정규 표현식 살펴보기
: 정규 표현식(Regular Expressions) : 복잡한 문자열을 처리할 때 사용하는 기법 / 문자열을 처리하는 모든 언어에 있다.

# 정규 표현식은 왜 필요한가?
예) 주민등록번호를 포함하고 있는 텍스트가 있다. 이 텍스트에 포함된 모든 주민등록번호의 뒷자리를 * 문자로 변경하기

= 정규식을 작성하는 순서
1. 전체 텍스트를 공백 문자로 나눈다.(split)
2. 나뉜 단어가 주민등록번호 형식인지 조사한다.
3. 단어가 주민등록번호 형식이라면 뒷자리를 *로 변환하다.
4. 나뉜 단어를 다시 조립한다.


>>> data = """
park 800905-1049118
kim  700905-1059119
"""
>>> result = []
>>> for line in data.split(" "):
	word_result = []
	for word in line.split(" "):
		if len(word) == 14 and word[:6].isdigit() and word[7:].isdigit():
			word = word[:6] + "-" + "********"
			word_result.append(word)
			result.append(" ".join(word_result))
			print("\n".join(result))

			
800905-********
800905-********
700905-********

>>> import re
>>> data = """
park 800905-1049118
kim  700905-1059119
"""

>>> pat = re.compile("(\d{6})[-]\d{7}")
>>> print(pat.sub("\g<1>-*******", data))

park 800905-*******
kim  700905-*******

=> 정규 표현식을 사용하면 간단한 예제에서도 코드가 상당히 간결해진다.
  (만약 찾으려는 문자열 또는 바꾸어야 할 문자열의 규칙이 매우 복잡하다면 정규식의 효용은 더 커지게 된다.)
 
 
07-2 정규 표현식 시작하기

# 정규 표현식의 기초, 메타 문자
: 메타문자(meta characters) : .^$*+?{}[]\|()
> 메타문자를 사용하면 특별한 의미를 갖게 된다.

= 문자 클래스[]
: 문자 클래스(character class) : '[] 사이의 문자들과 매치'
예) 정규 표현식 [abc] = 'a, b, c 중 한 개의 문자와 매치'
===================================================================
정규식	문자열	매치여부		설명
		a		 Yes		"a"는 정규식과 일치하는 문자인 "a"가 있으므로 매치.
[abc]	before	 Yes		"before"는 정규식과 일치하는 문자인 "b"가 있으므로 매치.
		dude	 No			"dude"는 정규식과 일치한ㄴ 문자인 a, b, c 중 어느 하나도
							 포함하고 있지 않으므로 매치되지 않음.
===================================================================

[] 안의 두 문자 사이에 하이픈(-)을 사용하면 두 문자 사이의 번수(From-To)를 의미한다.
예) [a-c] = [abc]
	[0-5] = [12345]

[a-zA-Z] : 알파벳 모두
[0-9] : 숫자

=> 주의해야할 메타 문자 : ^ 이다. > ^ 메타 문자를 사용할 경우, 반대(not)라는 의미를 갖는다.
예) [^0-9]라는 정규 표현식은 숫자가 아닌 문자만 매치된다.

===================================================================
# 자주 사용하는 문자 클래스
----------------------------------------------------------------
정규 표현식	설명
\d			숫자와 매치, [0-9]와 동일한 표현식이다.
\D			숫자가 아닌 것과 매치, [^0-9]와 동일한 표현식이다.
\s			whitespace문자(space나 tab처럼 공백을 표현하는 문자)와 매치,
			[\t\n\r\f\v]와 동일한 표현식이다. 맨 앞의 빈칸은 공백 문자(space)를 의미한다.
\S			whitespace 문자가 아닌 것과 매치, [a-zA-Z0-9_]와 동일한 표현식이다.
\w			문자+숫자(alphanumeric)와 매치, [a-zA-Z0-9_]와 동일한 표현식이다.
\W			문자+숫자(alphanumeric)가 아닌 문자와 매치, [^a-zA-z0-9]와 동일한 표현식이다.
----------------------------------------------------------------
> 대문자를 사용하는 방식은 소문자와 반대되는 방식이다.
===================================================================

# Dot(.)
: 줄바꿈 문자인 \n을 제외한 모든 문자와 매치됨.
===================================================================
a.b    # a와 b 사이에 줄바꿈 문자를 제외한 어떤 문자가 들어가도 모두 매치
===================================================================
> "a + 모든 문자 + b"

===================================================================
정규식	문자열	매치 여부		설명
		aab		Yes			"aab"는 가운데 문자 "a"가 모든 문자를 의미하는 .과
							일치하므로 정규식과 매치
abc		a0b		Yes			"a0b"는 가운데 문자 "0"이 모든 문자를 의미하는 .과
							일치하므로 정규식과 매치
		abc		No			"abc"는 "a" 문자와 "b"문자 사이에 어떤 문자라도 하나는
							있어야 하는 이 정규식과 일치하지 않으므로 매치되지 않음
===================================================================

a[.]b    # a와 b 사이에 Dot(.) 문자가 있으면 매치

: a[.]b는 "a.b"와 매치된다.

# 반복(*)

ca*t    # *문자 바로 앞에 있는 a가 0번 이상 반복되면 매치

> *은 * 바로 앞에 있는 문자 a가 0부터 무한대로 반복될 수 있다는 의미
===================================================================
정규식	문자열	매치 여부		설명
		ct		Yes			"a"가 0번 반복되어 매치
ca*t	cat		Yes			"a"가 0번 이상 반복되어 매치(1번 반복)
		caaat	Yes			"a"가 0번 이상 반복되어 매치(3번 반복)
===================================================================

# 반복(+)
: +는 최소 1번 이상 반복될 때 사용한다.(*가 반복 횟수 0부터라면 +는 반복 횟수 1부터인 것이다.)

ca+t    # +문자 바로 앞에 있는 a가 1번 이상 반복되면 매치
===================================================================
정규식	문자열	매치 여부		설명
		ct		No			"a"가 0번 반복되어 매치되지 않음
ca+t	cat		Yes			"a"가 1번 이상 반복되어 매치(1번 반복)
		caaat	Yes			"a"가 1번 이상 반복되어 매치(3번 반복)
===================================================================

# 반복({m,n},?)
: {} 메타 문자를 사용하면 반복 횟수를 고정할 수 있다.

1. {m}
ca{2}t		# a가 2번 반복되면 매치
===================================================================
정규식	문자열	매치 여부		설명
ca(2)t	cat		No			"a"가 1번만 반복되어 매치되지 않음
		caat	Yes			"a"가 2번 반복되어 매치
===================================================================

2. {m,n}
ca{2,5}t    # a가 2~5번 반복되면 매치
===================================================================
정규식		문자열		매치 여부		설명
			cat			No			"a"가 1번만 반복되어 매치되지 않음
ca{2,5}t	caat		Yes			"a"가 2번 반복되어 매치
			caaaaat		Yes			"a"가 5번 반복되어 매치
===================================================================

3. ?

ab?c	# b가 0~1번 사용되면 매치
===================================================================
정규식	문자열	매치 여부		설명
ab?c	abc		Yes			"b"가 1번 사용되어 매치
		ac		Yes			"b"가 0번 사용되어 매치
===================================================================

=> 가급적이면 *, +, ? 을 사용한다.

